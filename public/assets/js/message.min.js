"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),message=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new_message",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"submit_message",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"messages";_classCallCheck(this,e),this.messageInputEl=this.getEl(t),this.messageSubmitEl=this.getEl(a),this.messageOutputEl=this.getEl(s)}return _createClass(e,[{key:"submitHandler",value:function(){var e=this;return this.messageSubmitEl.onclick=function(){e.send()},this.messageInputEl.onkeyup=function(t){13===t.keyCode&&e.send()},this}},{key:"send",value:function(){var e=this.messageInputEl.value,t=firebase.database(),a=firebase.auth().currentUser.email;0!==e.length&&(t.ref("board/").push({message:e,timestamp:Date.now(),email:a}),this.messageInputEl.value="")}},{key:"listen",value:function(){var e=this,t=void 0,a=void 0;return firebase.database().ref("board/").limitToLast(50).on("child_added",function(s){a=document.createTextNode(s.val().email+" ["+e.time(s.val().timestamp)+"]: "+s.val().message),(t=document.createElement("div")).appendChild(a),e.messageOutputEl.appendChild(t)}),this}},{key:"time",value:function(e){var t=new Date(e),a=void 0,s=void 0;return a=t.getHours()>12?t.getHours()-12:t.getHours(),s=t.getHours()>=12?"pm":"am",a+":"+t.getMinutes()+s}},{key:"getEl",value:function(e){return document.getElementById(e)}}]),e}();